{"version":3,"sources":["js/main.js"],"names":["loginForm","document","querySelector","forgetForm","signupForm","mode","style","display","window","onload","singup","pristine","Pristine","addEventListener","e","valid","preventDefault","validate","data","Name","$getId","value","Email","Company","Address","Telephone","Password","r","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","res","message","JSON","parse","responseText","innerHTML","setTimeout","remove","error","send","stringify","login_form","login_pristine","user","localStorage","getItem","token","readCookie","console","log","location","href","createCookie","setItem","forget_form","forget_pristine","getQueryString","field","url","string","RegExp","exec"],"mappings":"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","file":"main.f4af9134.js","sourceRoot":"../assets","sourcesContent":["var loginForm = document.querySelector(\".login-form\");\nvar forgetForm = document.querySelector(\".forget-form\");\nvar signupForm = document.querySelector(\".signup-form\");\n\n//This is Duplication, bad practice\nif (mode === \"login\") {\n  loginForm.style.display = \"block\";\n  forgetForm.style.display = \"none\";\n  signupForm.style.display = \"none\";\n}\n\nif (mode === \"passwordforgot\") {\n  loginForm.style.display = \"none\";\n  forgetForm.style.display = \"block\";\n  signupForm.style.display = \"none\";\n}\n\n//This is Duplication, bad practice\nif (mode === \"signup\") {\n  loginForm.style.display = \"none\";\n  forgetForm.style.display = \"none\";\n  signupForm.style.display = \"block\";\n}\n\n/*const fog = $getId(\"users_login_form\");\nif (fog) {\n  fog.addEventListener(\"click\", function(elem) {\n    var login = document.querySelector(\".login-form\");\n    login.style.display = \"block\";\n    var forget = document.querySelector(\".forget-form\");\n    forget.style.display = \"none\";\n    var signup = document.querySelector(\".signup-form\");\n    signup.style.display = \"none\";\n  });\n}*/\n\n/**\n *@function user forget pasword\n */\n\n//This is Duplication, bad practice\n\n/**\n * on windlow load to run\n */\n\nwindow.onload = function() {\n  // A validator to check if the input value is within a specified range\n  // The global validator must be added before creating the pristine instance\n  /**\n   * user signup function\n   * @type {Element}\n   */\n  var singup = document.querySelector(\".signup-form\");\n\n  var pristine = new Pristine(singup);\n\n  singup.addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    var valid = pristine.validate();\n    if (valid == true) {\n      var data = {};\n      data.Name = $getId(\"Name\").value;\n      data.Email = $getId(\"Email\").value;\n      data.Company = $getId(\"Company\").value;\n      data.Address = $getId(\"Address\").value;\n      data.Telephone = $getId(\"Telephone\").value;\n      data.Password = $getId(\"Password\").value;\n      var r = new XMLHttpRequest();\n      r.open(\"POST\", \"http://localhost:5000/signup\", true);\n      r.setRequestHeader(\"Content-type\", \"application/json\");\n      r.onreadystatechange = function() {\n        // Only run if the request is complete\n        if (r.readyState !== 4) return;\n        var res = JSON.parse(r.responseText);\n\n        if (res.message) {\n          var login = document.querySelector(\".login-form\");\n          login.style.display = \"block\";\n          var forget = document.querySelector(\".forget-form\");\n          forget.style.display = \"none\";\n          var signup = document.querySelector(\".signup-form\");\n          signup.style.display = \"none\";\n          var el = document.querySelector(\".login-form .alert.alert-success\");\n          el.innerHTML +=\n            '<p class=\"msg\"><strong>Success!</strong>' + res.message + \"</p>\";\n          var message = document.querySelector(\n            \".login-form .alert.alert-success\"\n          );\n          message.style.display = \"block\";\n          setTimeout(function() {\n            var hide_msg = document.querySelector(\n              \".login-form .alert.alert-success\"\n            );\n            message.style.display = \"none\";\n            document\n              .querySelector(\".login-form .alert.alert-success .msg\")\n              .remove();\n          }, 5000);\n        } else {\n          var el = document.querySelector(\".signup-form .alert.alert-danger\");\n          el.innerHTML +=\n            '<p class=\"msg\"><strong>Sorry!</strong>' + res.error + \"</p>\";\n          var message = document.querySelector(\n            \".signup-form .alert.alert-danger\"\n          );\n          message.style.display = \"block\";\n          setTimeout(function() {\n            var hide_msg = document.querySelector(\n              \".signup-form .alert.alert-danger\"\n            );\n            message.style.display = \"none\";\n            document\n              .querySelector(\".signup-form .alert.alert-danger .msg\")\n              .remove();\n          }, 5000);\n        }\n      };\n      r.send(JSON.stringify(data));\n    }\n  });\n  /**\n   * user login function\n   * @type {Element}\n   */\n  var login_form = document.querySelector(\".login-form\");\n\n  var login_pristine = new Pristine(login_form);\n\n  login_form.addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    var valid = login_pristine.validate();\n    if (valid == true) {\n      var data = {};\n\n      data.Email = $getId(\"log_Email\").value;\n      data.Password = $getId(\"log_Password\").value;\n\n      var user = window.localStorage.getItem(\"weld_user\");\n      var token = readCookie(\"weld_token\");\n      if (token != null || user != null) {\n        console.log(\"here\");\n        window.location.href = \"http://localhost/vanilajs/dashboard.html\";\n      } else {\n        var r = new XMLHttpRequest();\n        r.open(\"POST\", \"http://localhost:5000/signin\", true);\n        r.setRequestHeader(\"Content-type\", \"application/json\");\n        r.onreadystatechange = function() {\n          // Only run if the request is complete\n          if (r.readyState !== 4) return;\n\n          var res = JSON.parse(r.responseText);\n          if (res.message == \"Login success\") {\n            createCookie(\"weld_token\", res.token, 30);\n            window.localStorage.setItem(\"weld_user\", JSON.stringify(res.user));\n            window.location.href = \"http://localhost/vanilajs/dashboard.html\";\n          } else {\n            var el = document.querySelector(\".login-form .alert.alert-danger\");\n            el.innerHTML +=\n              '<p class=\"msg\"><strong>Sorry!</strong>' + res.error + \"</p>\";\n            var message = document.querySelector(\n              \".login-form .alert.alert-danger\"\n            );\n            message.style.display = \"block\";\n            setTimeout(function() {\n              var hide_msg = document.querySelector(\n                \".login-form .alert.alert-danger\"\n              );\n              message.style.display = \"none\";\n              document\n                .querySelector(\".login-form .alert.alert-danger .msg\")\n                .remove();\n            }, 3000);\n          }\n        };\n        r.send(JSON.stringify(data));\n      }\n    }\n  });\n  var forget_form = document.querySelector(\".forget-form\");\n  var forget_pristine = new Pristine(forget_form);\n\n  forget_form.addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    var valid = forget_pristine.validate();\n    if (valid == true) {\n      var data = {};\n      data.Email = $getId(\"fog_Email\").value;\n      var user = window.localStorage.getItem(\"weld_user\");\n      var token = readCookie(\"weld_token\");\n      if (token != null || user != null) {\n        window.location.href = \"http://localhost/vanilajs/dashboard.html\";\n      } else {\n        var r = new XMLHttpRequest();\n        r.open(\"POST\", \"http://localhost:5000/forgot\", true);\n        r.setRequestHeader(\"Content-type\", \"application/json\");\n        r.onreadystatechange = function() {\n          // Only run if the request is complete\n          if (r.readyState !== 4) return;\n\n          // var res = JSON.parse(r.responseText)\n          var res = JSON.parse(r.responseText);\n          console.log(res);\n          if (res.message) {\n            var el = document.querySelector(\n              \".forget-form .alert.alert-success\"\n            );\n            el.innerHTML +=\n              '<p class=\"msg\"><strong>Success!</strong>' + res.message + \"</p>\";\n            var message = document.querySelector(\n              \".forget-form .alert.alert-success\"\n            );\n            message.style.display = \"block\";\n            setTimeout(function() {\n              var hide_msg = document.querySelector(\n                \".forget-form .alert.alert-success\"\n              );\n              message.style.display = \"none\";\n              document\n                .querySelector(\".forget-form .alert.alert-success .msg\")\n                .remove();\n            }, 3000);\n            setTimeout(function() {\n              window.location.href = \"http://localhost/vanilajs/main.html\";\n            }, 4000);\n          } else {\n            var el = document.querySelector(\".forget-form .alert.alert-danger\");\n            el.innerHTML += '<p class=\"msg\">' + res.error + \"</p>\";\n            var message = document.querySelector(\n              \".forget-form .alert.alert-danger\"\n            );\n            message.style.display = \"block\";\n            setTimeout(function() {\n              var hide_msg = document.querySelector(\n                \".forget-form .alert.alert-danger\"\n              );\n              message.style.display = \"none\";\n              document\n                .querySelector(\".forget-form .alert.alert-danger .msg\")\n                .remove();\n            }, 3000);\n          }\n        };\n        r.send(JSON.stringify(data));\n      }\n    }\n  });\n};\n/**\n * Get the value of a querystring\n * @param  {String} field The field to get the value of\n * @param  {String} url   The URL to get the value from (optional)\n * @return {String}       The field value\n */\nvar getQueryString = function(field, url) {\n  var href = url ? url : window.location.href;\n  var reg = new RegExp(\"[?&]\" + field + \"=([^&#]*)\", \"i\");\n  var string = reg.exec(href);\n  return string ? string[1] : null;\n};\n"]}